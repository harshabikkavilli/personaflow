@import 'tailwindcss';

/* Custom dark theme styles for PersonaFlow */
:root {
	--pf-bg-primary: #0f0f0f;
	--pf-bg-secondary: #1a1a1a;
	--pf-bg-tertiary: #252525;
	--pf-border: #333333;
	--pf-text-primary: #ffffff;
	--pf-text-secondary: #a0a0a0;
	--pf-text-muted: #666666;

	/* Node type colors */
	--pf-planner: #3b82f6;
	--pf-executor: #f97316;
	--pf-critic: #a855f7;
	--pf-router: #eab308;
	--pf-tool: #6b7280;
	--pf-memory: #14b8a6;
	--pf-human: #ec4899;

	/* Status colors */
	--pf-success: #22c55e;
	--pf-warning: #f59e0b;
	--pf-error: #ef4444;
	--pf-info: #6b7280;

	/* Primary gradient */
	/* --pf-primary-gradient: linear-gradient(135deg, #8b5cf6, #3b82f6, #6366f1); */
	--pf-primary-gradient: #8b5cf6;
}

body {
	margin: 0;
	background-color: var(--pf-bg-primary);
	color: var(--pf-text-primary);
	font-family:
		Inter,
		system-ui,
		-apple-system,
		sans-serif;
}

#root {
	min-height: 100vh;
	display: flex;
	flex-direction: column;
}

/* React Flow custom styles */
.react-flow__node {
	font-size: 12px;
}

.react-flow__edge-path {
	stroke: var(--pf-border);
	stroke-width: 2;
}

.react-flow__edge.selected .react-flow__edge-path {
	stroke: var(--pf-text-secondary);
}

.react-flow__handle {
	width: 8px;
	height: 8px;
	background: var(--pf-border);
	border: 2px solid var(--pf-bg-secondary);
}

.react-flow__handle:hover {
	background: var(--pf-text-secondary);
}

.react-flow__background {
	background-color: var(--pf-bg-secondary);
}

.react-flow__minimap {
	background-color: var(--pf-bg-tertiary);
}

.react-flow__controls {
	background-color: var(--pf-bg-tertiary);
	border: 1px solid var(--pf-border);
	border-radius: 8px;
}

.react-flow__controls-button {
	background-color: var(--pf-bg-tertiary);
	border-color: var(--pf-border);
	fill: var(--pf-text-secondary);
}

.react-flow__controls-button:hover {
	background-color: var(--pf-bg-secondary);
}

/* Selection ring color */
.ring-offset-\[var\(--pf-bg-secondary\)\] {
	--tw-ring-offset-color: var(--pf-bg-secondary);
}

/* Scrollbar styling */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: var(--pf-bg-primary);
}

::-webkit-scrollbar-thumb {
	background: var(--pf-border);
	border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
	background: var(--pf-text-muted);
}

/* Line clamp utility */
.line-clamp-2 {
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

/* Smooth transitions */
* {
	transition-property:
		background-color, border-color, color, fill, stroke, opacity, box-shadow;
	transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
	transition-duration: 150ms;
}

/* Disable transitions on React Flow viewport for smooth panning */
.react-flow__viewport,
.react-flow__pane {
	transition: none !important;
}

/* Ensure React Flow can handle touch events on mobile */
.react-flow__pane {
	touch-action: pan-x pan-y;
	-webkit-overflow-scrolling: touch;
}

/* Prevent text selection during panning on mobile */
.react-flow__pane,
.react-flow__node {
	-webkit-user-select: none;
	user-select: none;
	-webkit-touch-callout: none;
}

/* Disable transitions for React Flow elements to prevent jank */
.react-flow__node,
.react-flow__edge,
.react-flow__handle {
	transition: none;
}

/* Edge styling */
.react-flow__edge path {
	stroke: #666666;
	stroke-width: 2;
}

.react-flow__edge.selected path {
	stroke: #a0a0a0;
}

/* Animated edge with pulsing glow effect */
.animated-edge path {
	animation: edgePulse 2s ease-in-out infinite;
	stroke-dasharray: 8 4;
}

.animated-edge-pulse path {
	animation: edgePulseGlow 2s ease-in-out infinite;
}

@keyframes edgePulse {
	0%,
	100% {
		opacity: 0.9;
		stroke-dashoffset: 0;
	}
	50% {
		opacity: 1;
		stroke-dashoffset: -12;
	}
}

@keyframes edgePulseGlow {
	0%,
	100% {
		opacity: 0.2;
	}
	50% {
		opacity: 0.5;
	}
}

/* Edge hover effects */
.react-flow__edge:hover path {
	stroke-width: 3;
	opacity: 1;
	filter: drop-shadow(0 0 4px currentColor);
}

/* Smooth edge transitions */
.react-flow__edge path {
	transition:
		stroke-width 0.2s ease,
		opacity 0.2s ease;
}

/* Primary gradient utilities */
.gradient-primary {
	background: var(--pf-primary-gradient);
}

.gradient-primary-text {
	background: var(--pf-primary-gradient);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

/* Prevent all transitions on nav links to avoid flickering when switching routes */
/* Only allow transitions on hover for smooth UX */
header nav a {
	transition: none !important;
}

/* Re-enable color transition only on hover */
header nav a:hover:not(.gradient-primary-text) {
	transition: color 150ms cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* Disable all transitions for gradient text to prevent flickering */
header nav a.gradient-primary-text {
	transition: none !important;
	-webkit-background-clip: text !important;
	background-clip: text !important;
}

.gradient-primary-border {
	border-image: var(--pf-primary-gradient) 1;
}

.focus-gradient-ring:focus {
	outline: none;
	ring-width: 1px;
	ring-color: #3b82f6;
	box-shadow:
		0 0 0 1px #3b82f6,
		0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Graph preview dots pattern for template cards */
.graph-preview-dots {
	background-image: radial-gradient(#333 1px, transparent 1px);
	background-size: 12px 12px;
}

/* Custom scrollbar for modal */
.custom-scrollbar::-webkit-scrollbar {
	width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
	background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
	background: var(--pf-border);
	border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
	background: #444;
}
